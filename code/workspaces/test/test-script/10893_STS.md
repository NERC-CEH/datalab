# Datalabs System Test Script
## Contents
### 1. Introduction
### 2. System Test Script (Functional Testing)
### 3. Production Deployment Test Script (Functional Testing)
### 4. Non-Functional Test Script
---
## 1. Introduction
### 1.1 Purpose of this document
This document is the System Test Script for project 10893.
### 1.2 Scope of this document
This document the test cases to test new functionality and, where available, existing dependent regression testing for the existing system. It also provides non-functional test cases where appropriate.
### 1.3 Context of this issue
This System Test Script has been produced during the project and any subsequent changes will be documented as the project progresses.

## 2 System Test Script (Functional Testing)

System testing is carried out as part of every sprint to ensure the completed stories and updated system meets all the applicable requirements. For full details on the system testing process, please consult the project test plan.

**Template for Test Cases**
>>>###### **TC[section number] TESTCASE TITLE HERE**
>>> | **JIRA ID(s):** | [JIRA UNIQUE ID(s)](URL to JIRA ISSUE) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 |  |  |  |
>>> | 2 |  |  |  |
>>> | 3 |  |  |  |
>>> | 4 |  |  |  |
>>> | 5 |  |  |  |
---
### 2.1 Homepage
>##### 2.1.1 Create Project

>##### 2.1.2 Delete Project
>>>###### **TC2.1.2.1 User can delete exsting projects**
>>> | **JIRA ID(s):** | [NERCDL-727](https://jira.ceh.ac.uk/browse/NERCDL-727?jql=key%20in%20(NERCDL-727)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to https://testlab.test-datalabs.nerc.ac.uk/projects | Existing projects that the user has access to are shown here |  |
>>> | 2 | Click on open | User is taken to the project overview page |  |
>>> | 3 | Copy the URL and then press the back button in the browser | URL is copied and the user is taken back to the projects page | 
>>> | 5 | Click on the three dotted button next to a project | There is only the option to delete the project |  |
>>> | 6 | Press the delete button | User is shown a dialog asking them to confirm the deletion. There is a text field for the user to enter a specific string to confirm the deletion |  |
>>> | 7 | Press delete without entering the confirmation string | Nothing happens as the button is greyed out |  |
>>> | 8 | Press delete after entering an incorrect confirmation string | Nothing happens as the button is greyed out |  |
>>> | 9 | Press delete after entering the correct confirmation string | Project is deleted. There is a confirmation message displayed in the UI. |  |
>>> | 10 | Paste the URL into the browser and try to navigate back to the deleted project | User is re-directed back to https://testlab.test-datalabs.nerc.ac.uk/projects |  |
---

>##### 2.1.3 List Projects
>>##### 2.1.3.1 List All Projects
>>##### 2.1.3.2 List My Projects
>>##### 2.1.3.3 Pagination of Project List
>>>###### **TC2.1.3.3.1 Maximum number of projects shown on a single page is 10**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure 30 projects have been created and the logged in user has access to them  | 30 projects are available and displayed  |  |
>>> | 2 | Check the displayed page number equals 1  | Page number = 1  |  |
>>> | 3 | Check the number of displayed projects on page 1 | First set of 10 projects are displayed  |  |
>>> | 4 | Select the Next Page icon | User is taken to page 2  |  |
>>> | 5 | Check the number of displayed projects on page 2  | Next set of 10 projects are displayed  |  |
>>> | 6 | Select the Next Page icon  | User is taken to page 3  |  |
>>> | 7 | Check the number of displayed projects on page 3  | Last set of 10 projects are displayed |  |
---
>>>###### **TC2.1.3.3.2 Pagination component displays the correct number of pages**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-626](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure 30 projects have been created and the logged in user has access to them | 30 projects are available and displayed |  |
>>> | 2 | Check the Pagination control | Pagination control displays Page 1 of 3, '1' is an editable value |  |
>>> | 3 | Select the Next Page icon | User is taken to page 2 |  |
>>> | 4 | Check the Pagination control | Pagination control displays Page 2 of 3, '1' is an editable value  |  |
>>> | 5 |Select the Next Page icon | User is taken to page 3 |  |
>>> | 6 | Check the Pagination control | Pagination control displays Page 3 of 3, '1' is an editable value |  |
---
>>>###### **TC2.1.3.3.3 The next page button increments the page number by 1 if additional pages are available**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-626](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure 30 projects have been created and the logged in user has access to them | 30 projects are available and displayed |  |
>>> | 2 | Ensure user is on page 1  | User is on page 1 |  |
>>> | 3 | Check the Next Page icon and mouse-hover over it  | Icon is enabled, message informing the user they can go to the next page is displayed |  |
>>> | 4 | Select the Next Page icon  | User is taken to page 2 |  |
>>> | 5 | Check the Next Page icon and mouse-hover over it | Icon is enabled, message informing the user they can go to the next page is displayed |  |
>>> | 6 | Select the Next Page icon | User is taken to page 3 |  |
---
>>>###### **TC2.1.3.3.4 The next page button does not increment the page number if there are no further pages**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-626](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure 30 projects have been created and the logged in user has access to them | 30 projects are available and displayed |  |
>>> | 2 | Enter page 3 on the pagination control and select ENTER | Page 3 is loaded with correct projects |  |
>>> | 3 | Check the Next Page icon and mouse-hover over it | Icon is disabled, message informing the user there is no next page is displayed |  |
>>> | 4 | Select the Next Page icon | Icon is disabled, user remains on page 3 |  |
---
>>>###### **TC2.1.3.3.5 The previous page button decrements the page number by 1 if the current page number is greater than 1**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-626](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure 30 projects have been created and the logged in user has access to them | 30 projects are available and displayed |  |
>>> | 2 | Enter page 3 on the pagination control and select ENTER | Page 3 is loaded with correct projects |  |
>>> | 3 | Check the Previous Page icon and mouse-hover over it  | Icon is enabled, message informing the user they can go to the previous page is displayed |  |
>>> | 4 | Select the Previous Page icon  | User is taken to page 2 |  |
>>> | 5 | Check the Previous Page icon and mouse-hover over it | Icon is enabled, message informing the user they can go to the previous page is displayed |  |
>>> | 6 | Select the Previous Page icon | User is taken to page 1 |  |
---
>>>###### **TC2.1.3.3.6 The previous page button does not decrement the page number if the the user is on page 1**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-626](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure 30 projects have been created and the logged in user has access to them | 30 projects are available and displayed |  |
>>> | 2 | Enter page 1 on the pagination control and select ENTER | Page 1 is loaded with correct projects |  |
>>> | 3 | Check the Previous Page icon and mouse-hover over it | Icon is disabled, message informing the user there is no previous page is displayed |  |
>>> | 4 | Select the Next Page icon | Icon is disabled, user remains on page 1 |  |
---
>>>###### **TC2.1.3.3.7 The user is taken to the correct page when typing the desired page number into pagination component**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-626](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure 30 projects have been created and the logged in user has access to them | 30 projects are available and displayed |  |
>>> | 2 | Check the displayed page number equals 1  | Page number = 1 |  |
>>> | 3 | Enter page 3 on the pagination control and select ENTER | Page 3 is loaded with correct projects |  |
>>> | 4 | Enter page 2 on the pagination control and select ENTER | Page 2 is loaded with correct projects |  |
>>> | 5 | Enter page 1 on the pagination control and select ENTER | Page 1 is loaded with correct projects |  |
>>> | 6 | Enter page 02 on the pagination control and select ENTER | Page 2 is loaded with correct projects |  |
---
>>>###### **TC2.1.3.3.8 Typing an invalid page value resets the value to the current page**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-626](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure 30 projects have been created and the logged in user has access to them | 30 projects are available and displayed |  |
>>> | 2 |Check the displayed page number equals 1  | Page number = 1 |  |
>>> | 3 | Enter page 4 on the pagination control and select ENTER | Pagination control resets to Page 1 and correct projects are displayed |  |
>>> | 4 | Enter page 2 on the pagination control and select ENTER | Page 2 is loaded with correct projects |  |
>>> | 5 | Enter page 4 on the pagination control and select ENTER | Pagination control resets to Page 2 and correct projects are displayed |  |
>>> | 6 | Enter page 3 on the pagination control and select ENTER | Page 3 is loaded with correct projects |  |
>>> | 7 | Enter page 4 on the pagination control and select ENTER | Pagination control resets to Page 3 and correct projects are displayed |  |
>>> | 8 | Enter page 0 on the pagination control and select ENTER | Pagination control resets to Page 3 and correct projects are displayed |  |
>>> | 9 | Enter page -1 on the pagination control and select ENTER | Pagination control resets to Page 3 and correct projects are displayed |  |
>>> | 10 | Enter page 100 on the pagination control and select ENTER | Pagination control resets to Page 3 and correct projects are displayed |  |
>>> | 11 | Enter page abc on the pagination control and select ENTER | Pagination control resets to Page 3 and correct projects are displayed |  |
>>> | 12 | Enter page 1a on the pagination control and select ENTER | Pagination control resets to Page 3 and correct projects are displayed |  |
---
>>>###### **TC2.1.3.3.9 Selecting 'My projects' when on the last page of all projects, sends user to correct last page if there are fewer pages for their projects**
>>> | **JIRA ID(s):** | [NERCDL-599](https://jira.ceh.ac.uk/browse/NERCDL-599?jql=key%20in%20(NERCDL-599)), [NERCDL-626](https://jira.ceh.ac.uk/browse/NERCDL-626?jql=key%20in%20(NERCDL-626)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 |Ensure 30 projects have been created by the logged in user and the user has access to to a further 1 project not created by them | 30 current user projects and 1 other user project are available |  |
>>> | 2 | Ensure that My Projects is deselected | Option is deselected, all projects the user can view are displayed in pages of 10 each or less |  |
>>> | 3 | Select the last page | Last page (should be Page 4) is selected. correct projects are displayed |  |
>>> | 4 | Select My Projects option | Option is selected, only the current user's projects are displayed, last page is displayed (should be page 3) |  |
---
>##### 2.1.4 Open Project

### 2.2 Project View

>##### 2.2.1 Select Project

>##### 2.2.2 Information

>##### 2.2.3 Analysis
>>##### 2.2.3.1 Notebooks
>>>###### **T2.2.3.1 User can edit existing Notebooks**
>>> | **JIRA ID(s):** | [NERCDL-613](https://jira.ceh.ac.uk/browse/NERCDL-613?jql=key%20in%20(NERCDL-613)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Open an existing project | User is taken to the project info page |  |
>>> | 2 | Ensure there is an existing notebook that has been created | There is an existing notebook present |  |
>>> | 3 | Click on the edit button | A dialog is opened containing the display name and description. There are three buttons: Apply, Clear Changes and Cancel. All buttons except "Cancel" are disabled.  |  |
>>> | 4 | Remove existing text from the text fields  | Text fields are outlined in red informing the user that they cannot be blank. All buttons are enabled. |  |
>>> | 5 | Press "Apply" | Nothing happens |  |
>>> | 6 | Press "Clear Changes" | The original text is now present in the text fields |  |
>>> | 7 | Replace any text with a string that contains text, numbers and special characters | Text is replaced |  |
>>> | 8 | Press "Apply" | Changes are applied and there is a confirmation message displayed in the UI |  |
>>> | 9 | Click on the edit button | The edit dialog is re-opened |  |
>>> | 10 | Edit existing text | Text is edited  |  |
>>> | 11 | Press the cancel button | Dialog is closed and  edits are not saved  |  |

>>>###### **TC2.2.3.2 User can create a Jupyterlabs notebook**
>>> | **JIRA ID(s):** | [NERCDL-635](https://jira.ceh.ac.uk/browse/NERCDL-635?jql=key%20in%20) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure that a Gluster storage and NFS storage have been created in the project | Storages have been created |  |
>>> | 2 | Navigate to the Notebooks section | Existing notebooks are shown here |  |
>>> | 3 | Click on "Create New Notebook" | A dialog is shown with the following fields: Display name, notebook type, data store to mount, description and sharing status  |  |
>>> | 4 | Fill in the fields as required and set the data store mount to the pre-existing NFS store. Set the notebook type to Jupyterlab  | NFS store and notebook type is set is set |  |
>>> | 5 | Click on "Create" | Notebook is created. There is a message in the UI stating that the creation was successful.  |  |
>>> | 6 | Wait for a minute | THe status is changed from "Requested" to "Ready" |  |
>>> | 7 | Repeat the above tests for pre-existing Gluster store | The same results as the NFS store (above) are seen |  |

---

>>>###### **TC2.2.3.3 User can restart stacks in the UI**
>>> | **JIRA ID(s):** | [NERCDL-648](https://jira.ceh.ac.uk/browse/NERCDL-648?jql=key%20in%20) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | View the notebooks section of Datalabs | Existing notebooks are present |  |
>>> | 2 | Click on the three dot icon next to the notebook | User has the options to edit, share, restart or delete |  |
>>> | 3 | Click on restart | A dialog is shown asking the user to confirm or cancel the restart |  |
>>> | 4 | Press cancel | Teh dialog is closed |  |
>>> | 5 | Click on restart | The dialog is shown again |  |
>>> | 6 | Confirm the restart | The page is reloaded and there is a message displayed that iforms the user that the restart was successful |  |
>>> | 7 | Click on the drop down and select the edit option | A dialog window opens with the existing details |  |
>>> | 8 | Edit the details of the notebook and press save | The notebook is edited |  |
>>> | 9 | Repeat all of the above tests as a non-admin user | Same results are observed as an admin user |  |
---

>>>###### **TC2.2.3.4 User cannot create notebook without required fields**
>>> | **JIRA ID(s):** | [NERCDL-677](https://jira.ceh.ac.uk/browse/NERCDL-677?jql=key%20in%20(NERCDL-677)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to the notebook page | Pre-existing notebooks are listed here |  |
>>> | 2 | Click on the create button | A dialog is shown with the following fields: Display Name, Notebook Type, URL, Data Store, Source Path, Description and Sharing Status |  |
>>> | 3 | Press the create button without entering information | Every field is outlined in red |  |
>>> | 4 | Enter information into all fields except the sharing status. Press the create button | Site is not created. Sharing status is outlined in red with an error message informing the user that it is required |  |
>>> | 5 | Set a sharing status and press create | The notebook is successfully created |  |
---

>>>###### **TC2.2.3.5 Extra fields when creating R Studio notebook**
>>> | **JIRA ID(s):** | [NERCDL-683](https://jira.ceh.ac.uk/browse/NERCDL-683?jql=key%20in%20(NERCDL-683)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to the notebooks page | Pre-existing notebooks are listed here |  |
>>> | 2 | Click on the create button | A dialog is shown with the following fields: Display Name, Notebook Type, URL, Data Store, Source Path, Description and Sharing Status |  |
>>> | 3 | Fill out the required fields. Set the type to R studio | And extra field appears when R Studio is selected. This is a version field. 4.0.1 is the default value |  |
>>> | 4 | Click on the version field | A dropdown with two options is displayed: 4.0.1 & 3.5.3 |  |
>>> | 5 | Set the version to default and press create | Notebook is successfully created |  |
>>> | 6 | Create another R Studio site but set the version to 3.5.3 | Notebook is successfully created |  |
---

>##### 2.2.4.1 Dask
##### 2.2.5.1 Spark

##### 2.3 Storage
>##### 2.3.1 Edit Existing Storage
>>>###### **T2.3.1.1 User can edit existing Storage**
>>> | **JIRA ID(s):** | [NERCDL-613](https://jira.ceh.ac.uk/browse/NERCDL-613?jql=key%20in%20(NERCDL-613)) & [NERCDL-665](https://jira.ceh.ac.uk/browse/NERCDL-665?jql=key%20in%20(NERCDL-665))|OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Open an existing project | User is taken to the project info page |  |
>>> | 2 | Ensure there is an existing storage that has been created | There is an existing storage present |  |
>>> | 3 | Click on the edit button | A dialog is opened containing the display name, description and users with access. There are three buttons: Apply, Clear Changes and Cancel. All buttons except "Cancel" are disabled.  |  |
>>> | 4 | Remove existing text from the text fields  | Text fields are outlined in red informing the user that they cannot be blank. All buttons are enabled. |  |
>>> | 5 | Press "Apply" | Nothing happens |  |
>>> | 6 | Press "Clear Changes" | The original text is now present in the text fields |  |
>>> | 7 | Replace any text with a string that contains text, numbers and special characters | Text is replaced |  |
>>> | 8 | Press "Apply" | Changes are applied and there is a confirmation message displayed in the UI |  |
>>> | 9 | Click on the edit button | The edit dialog is re-opened |  |
>>> | 10 | Edit existing text | Text is edited  |  |
>>> | 11 | Press the cancel button | Dialog is closed and  edits are not saved  |  |
>>> | 11 | Press the cancel button | Dialog is closed and  edits are not saved  |  |
---

>>>###### **TC2.3.1.2 User can create NFS storage**
>>> | **JIRA ID(s):** | [NERCDL-635](https://jira.ceh.ac.uk/browse/NERCDL-635?jql=key%20in%20) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to the storage page | Any existing storages are shown. There is a button to create a new storage. |  |
>>> | 2 | Click on "Create Data Store" | A dialog is shown with the following fields: Display name, storage type, storage size, internal name and description  |  |
>>> | 3 | Fill in all fields as required and set the storage type to NFS | Storage type is set to NFS |  |
>>> | 4 | Press "Create" | The storage is created and shown in the UI. There is a message stating that the storage was successfully created |  |

---

>>>###### **TC2.3.1.3 User can create Gluster storage**
>>> | **JIRA ID(s):** | [NERCDL-635](https://jira.ceh.ac.uk/browse/NERCDL-635?jql=key%20in%20) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to the storage page | Any existing storages are shown. There is a button to create a new storage. |  |
>>> | 2 | Click on "Create Data Store" | A dialog is shown with the following fields: Display name, storage type, storage size, internal name and description  |  |
>>> | 3 | Fill in all fields as required and set the storage type to Gluster | Storage type is set to NFS |  |
>>> | 4 | Press "Create" | The storage is created and shown in the UI. There is a message stating that the storage was successfully created |  |

---

>>>###### **TC2.3.1.4 Extend Data Store dialog to NFS and experiment**
>>> | **JIRA ID(s):** | [NERCDL-635](https://jira.ceh.ac.uk/browse/NERCDL-635?jql=key%20in%20) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | The following stores have been created and a Jupyterlab notebook has been mounted to these stores: Gluster and NFS | Stores exist and Jupyterlabs notebooks have been mounted to these stores |  |
>>> | 2 | Open the Jupyter lab that is using NFS storage | Lab is opened and user can either open a notebook, console or "other" e.g. terminal |  |
>>> | 3 | Open the terminal and run 'env-control add my-environment' | The script completes successfully within 5 minutes |  |
>>> | 4 | Refresh the page | Page is refreshed |  |
>>> | 5 | Choose 'File > New launcher' | There is a notebook named "my-environment" |  |
>>> | 6 | Select the "my-environment" notebook | User is taken to the notebook environment |  |
>>> | 7 | Enter print("hello") and press the play button | "hello2 appears underneath |  |
>>> | 8 | In Datalabs view the NFS storage and press "Open" | The environment created in the above tests are shown in the Conda environment |  |
>>> | 9 | View the "notebooks" folder | "jupyterlab-<site name>" is shown |  |
>>> | 10 | Click on  "jupyterlab-<site name>" | There is a file named "Untitled.ipynb" present |  |
>>> | 11 | Repeat the above tests for a Gluster storage  | The same results for NFS storage are seen |  |
---

>>>###### **TC2.3.1.5 User can add more users to a storage**
>>> | **JIRA ID(s):** | [NERCDL-651](https://jira.ceh.ac.uk/browse/NERCDL-651?jql=key%20in%20(NERCDL-651)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | View the notesbook section of Datalabs | Existing notebooks are present |  |
>>> | 2 | Click on edit for one of the notebooks | A dialog is opened containing the display name, description and users with access. There are three buttons: Apply, Clear Changes and Cancel. All buttons except "Cancel" are disabled. |  |
>>> | 3 | Click on the "User's with access" field | A list of all user with access to Datalabs is shown |  |
>>> | 4 | Select a user from this list | User's email is now present in the field |  |
>>> | 5 | Press the X next to the  user's email | The user's email is removed |  |
>>> | 6 | Re-add the users email and press save | The user's email is saved |  |

---
>>>###### **TC2.3.1.6 User can give another user access to storage**
>>> | **JIRA ID(s):** | [NERCDL-665](https://jira.ceh.ac.uk/browse/NERCDL-665?jql=key%20in%20(NERCDL-665)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure that there is at least one other user who has access to the project | There is another user who can view the project |  |
>>> | 2 | As the project admin, navigate to the project storage page | Projects are listed |  |
>>> | 3 | Click on the three dotted button and select edit | A dialog is shown with the current storage information |  |
>>> | 4 | Add a second user to the storage and press save | Second user is added |  |
>>> | 5 | Log in to datalabs as the second user and navigate to the storage page| The project that user was added to is seen here |  |
>>> | 6 | Log back in as the administrator and remove the second user from the storage | Second user is removed |  |
>>> | 7 | Log back in as the second user and navigate to the storage page | The storage is no longer listed and the user can no longer access the storage. |  |

---

>>>###### **TC2.3.1.7 Storages are not shared between projects**
>>> | **JIRA ID(s):** | [NERCDL-788](https://jira.ceh.ac.uk/browse/NERCDL-788?jql=key%20in%20(NERCDL-788)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure that the user has access to two projects each with storages | User has access to two projects each with storages |  |
>>> | 2 | Access the first project and view the notebooks section. Press the create a notebook button | Create a notebook dialog opens |  |
>>> | 3 | View the data store dropdown in the create a notebook dialog | Data stores for only the first project are shown |  |
>>> | 4 | Navigate to the notebooks section of the second project | Any pre-existing notebooks are present |  |
>>> | 5 | Click on the create notebooks button | The create notebooks dialog form is opened |  |
>>> | 6 | View the storage dropdown | Only data stores for the second project are shown here |  |
---

##### 2.4 Sites
>>>###### **T2.4.1.1 User can edit existing Sites**
>>> | **JIRA ID(s):** | [NERCDL-613](https://jira.ceh.ac.uk/browse/NERCDL-613?jql=key%20in%20(NERCDL-613)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Open an existing project | User is taken to the project info page |  |
>>> | 2 | Ensure there is an existing site that has been created | There is an existing site present |  |
>>> | 3 | Click on the edit button | A dialog is opened containing the display name and description. There are three buttons: Apply, Clear Changes and Cancel. All buttons except "Cancel" are disabled.  |  |
>>> | 4 | Remove existing text from the text fields  | Text fields are outlined in red informing the user that they cannot be blank. All buttons are enabled. |  |
>>> | 5 | Press "Apply" | Nothing happens |  |
>>> | 6 | Press "Clear Changes" | The original text is now present in the text fields |  |
>>> | 7 | Replace any text with a string that contains text, numbers and special characters | Text is replaced |  |
>>> | 8 | Press "Apply" | Changes are applied and there is a confirmation message displayed in the UI |  |
>>> | 9 | Click on the edit button | The edit dialog is re-opened |  |
>>> | 10 | Edit existing text | Text is edited  |  |
>>> | 11 | Press the cancel button | Dialog is closed and  edits are not saved  |  |
---

>>>###### **TC2.4.1.2 User can create new sites**
>>> | **JIRA ID(s):** | [NERCDL-677](https://jira.ceh.ac.uk/browse/NERCDL-677?jql=key%20in%20(NERCDL-677)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to the sites page | Pre-existing sites are listed here |  |
>>> | 2 | Click on the create button | A dialog is shown with the following fields: Display Name, Site Type, URL, Data Store, Source Path, Description and Visibility Status |  |
>>> | 3 | Press the create button without entering information | Every field is outlined in red |  |
>>> | 4 | Enter information into all fields except the visibility status. Press the create button | Site is not created.Visibility status is outlined in red with an error message informing the user that it is required |  |
>>> | 5 | Set a visibility status and press create | The site is successfully created |  |
---

>>>###### **TC2.4.1.3 Extra fields when creating R Shiny site**
>>> | **JIRA ID(s):** | [NERCDL-683](https://jira.ceh.ac.uk/browse/NERCDL-683?jql=key%20in%20(NERCDL-683)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to the sites page | Pre-existing sites are listed here |  |
>>> | 2 | Click on the create button | A dialog is shown with the following fields: Display Name, Site Type, URL, Data Store, Source Path, Description and Visibility Status |  |
>>> | 3 | Fill out the required fields. Set the type to R studio | And extra field appears when R Shiny is selected. This is a version field. 4.0.1 is the default value |  |
>>> | 4 | Click on the version field | A dropdown with two options is displayed: 4.0.1 & 3.5.3 |  |
>>> | 5 | Set the version to default and press create | Site is successfully created |  |
>>> | 6 | Create another R Shiny site but set the version to 3.5.3 | Site is successfully created |  |
---

##### 2.5 Settings
>##### 2.5.1 Update Project Details
>##### 2.5.2 Add User
>>>###### **TC2.5.2.1 New users can be added to a project**
>>> | **JIRA ID(s):** | [NERCDL-783](https://jira.ceh.ac.uk/browse/NERCDL-783?jql=key%20in%20(NERCDL-783)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | As a project admin, navigate to the project settings https://testlab.test-datalabs.nerc.ac.uk/projects/project-name-here/settings | User can access the project settings page for a project which they are an admin. A list of users with access to the project, and their permissions, are shown on this page. |  |
>>> | 2 | Click on the add user field | A drop-down of users are shown. The drop down is shown directly above or below the user field, depending on how far the page has been scrolled up or down |  |
>>> | 3 | Select a user from the the list | User is selected |  |
>>> | 4 | Select the permissions drop-down to the right of the user field | Three permission options are available: Admin, User or Viewer |  |
>>> | 5 | Select the user option | User option is selected |  |
>>> | 6 | Click on "Add" | User is added to the user permissions list below the add user field |  |
>>> | 7 | Sign into Datalabs as this user | User has access to the project |  |
---

##### 2.6 Log in workflow
>##### 2.6.1 Sign up
>>>###### **TC2.6.1.1 User can sign up**
>>> | **JIRA ID(s):** | [NERCDL-581](https://jira.ceh.ac.uk/browse/NERCDL-581?jql=key%20in%20(NERCDL-581)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to the datalabs homepage | User is presented with the login/sign up buttons |  |
>>> | 2 | Click on Sign Up | User is shown the login dialog. There is a sign up tab |  |
>>> | 3 | Select the sign up tab |There are two fields present for the user's email and password |  |
>>> | 4 | Enter a valid email and password | Email is displayed and the password is hidden |  |
>>> | 5 | Press sign up | The user is taken to a verification page where there are two buttons:Home and Verified. An email is sent to the user. |  |
>>> | 6 | Press the verified button | USer is taken to the log in screen |  |
>>> | 7 | Attempt to login without verifying the account  | User is taken back to the verification page  |  |
>>> | 8 | Verify the account via the email | User is taken to a new successful verification page  |  |
>>> | 9 | On the first verification page click on the verified button | User is taken to the login page |  |
>>> | 10 | Using the credentials used to sign up, sign into Datalabs | User can successfully sign in |  |
---

>##### 2.6.2 Sign in
>>>###### **TC2.6.2.1 User can sign in**
>>> | **JIRA ID(s):** | [NERCDL-362](https://jira.ceh.ac.uk/browse/NERCDL-362?jql=key%20in%20(NERCDL-362)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to datalabs | User is shown the homepage that contains two buttons: Sign up and log in |  |
>>> | 2 | Click on Log in  | The log in dialog is shown and there are two fields for the user's email and password |  |
>>> | 3 | Enter an invalid email and password combination | "Wrong email or password" message is shown. User is not signed in |  |
>>> | 4 | Enter an email that does have access along with an incorrect password | "Wrong email or password" message is shown. User is not signed in |  |
>>> | 5 | Enter an email that does have access along with the correct password | User is logged in and shown the projects page |  |
>>> | 6 | View the web browser cookies for Data labs | There is an authorization cookie for test-datalabs.nerc.ac.uk |  |
---

>>>###### **TC2.6.2.2 User cannot access datalabs without signing in**
>>> | **JIRA ID(s):** | [NERCDL-362](https://jira.ceh.ac.uk/browse/NERCDL-362?jql=key%20in%20(NERCDL-362)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Ensure that the user is logged out of Datalabs | User is logged out |  |
>>> | 2 | Enter the following URL into the browser https://testlab.test-datalabs.nerc.ac.uk/projects | User cannot access the page and is prompted to log in |  |
>>> | 3 | Enter the following URL https://testlab.test-datalabs.nerc.ac.uk/projects/forraj/info | User cannot access the page and is prompted to log in |  |
>>> | 4 | Enter the following URL https://testlab.test-datalabs.nerc.ac.uk/projects/forraj/notebooks | User cannot access the page and is prompted to log in |  |
>>> | 5 | Enter the following URL https://testlab.test-datalabs.nerc.ac.uk/projects/forraj/storage | User cannot access the page and is prompted to log in  |  |
---

>>>###### **TC2.6.2.3 User is re-directed to the correct site after navigating to the wrong URL**
>>> | **JIRA ID(s):** | [NERCDL-433](https://jira.ceh.ac.uk/browse/NERCDL-433?jql=key%20in%20(NERCDL-433)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to an incorrect Datalabs URL e.g. https://badurl.test-datalabs.nerc.ac.uk/ | User is taken to a Datalabs page that informs the user that the requested page could not be found. There is a return to homepage link |  |
>>> | 2 | Click on the return to homepage link | If the user is not already signed in, they are taken to the homepage page https://testlab.test-datalabs.nerc.ac.uk/. If the user is already signed in, they are re-directed to the projects overview page |  |
---

##### 2.7 Admin
>>>###### **TC2.7.1 Admin workflow**
>>> | **JIRA ID(s):** | [NERCDL-650](https://jira.ceh.ac.uk/browse/NERCDL-650?jql=key%20in%20(NERCDL-650)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | As an admin user, log into Datalabs | There is an Admin button in the navigation bar |  |
>>> | 2 | Click on the Admin button | User is directed to the admin page. A list of project's and their resources are shown here. If there are more than 5 projects then there are pagination controls |  |
>>> | 3 | Click on the search field | A drop-down of all projects is shown. User can also search in the field |  |
>>> | 4 | Search for a project that exists | Project is shown in the drop-down |  |
>>> | 5 | Click on the search result | The page is filtered to only show this project. Notebooks, storages and sites associated with the project are listed. If there are more than 10 notebooks, storages or sites, pagination controls are present |  |
>>>| 6 | Use the pagination control to navigate back and forth between the pages of a notebook, storage or site | Pagination controls work  |  |
>>>| 7 | In the search bar remove the filter project by clicking on the X | All projects are shown again |  |
>>>| 8 | Search for a project that does not exit | "No Options" are shown in the dropdown |  |
>>>| 9 | Untick all of the checkboxes below the search bar | Empty projects are now shown |  |
>>>| 10 | Tick the storage checkbox | Only storages are shown beneath each project |  |
>>>| 11 | Tick the site checkbox | Only storages and sites are shown beneath each project |  |
>>>| 12 | Tick the notebooks checkbox | All three storages, sites and notebooks are shown |  |
---

>>>###### **TC2.7.2 Non-Admin users cannot access admin pages**
>>> | **JIRA ID(s):** | [NERCDL-650](https://jira.ceh.ac.uk/browse/NERCDL-650?jql=key%20in%20(NERCDL-650)) |OVERALL RESULT: |  |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Log into Datalabs as a non-admin user | Admin button is not present in top navigation bar |  |
>>> | 2 | Attempt to access https://testlab.test-datalabs.nerc.ac.uk/admin/resources | User cannot access any admin resources |  |
>>> | 3 | Attempt to access https://testlab.test-datalabs.nerc.ac.uk/admin/users | User cannot access any user permissions|  |
---

>>>###### **TC2.7.3 User permissions api returns the correct permissions**
>>> | **JIRA ID(s):** | [NERCDL-786](https://jira.ceh.ac.uk/browse/NERCDL-786?jql=key%20in%20(NERCDL-786)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Log in as an admin user | User is logged in and is taken to the /projects page |  |
>>> | 2 | View the chrome developer tools, switch to the network tab and reload the page | A list of network calls are shown |  |
>>> | 3 | View the response for the second to last api call | Contains the projects the user has access to and the admin status:  "system:catalogue:admin". It also contains the catalogue status e.g. catalogue publisher |  |
>>> | 4 | Log out of Datalabs | User is logged out successfully |  |
>>> | 5 | Log in as a user that is not an admin | User is logged in and is taken to the /projects page |  |
>>> | 6 | Repeat steps 1-3 as the non-admin user | Api response only contains the projects the user has access to. It does not contain admin information |  |
---

>>>###### **TC2.7.4 Admin user has access to user management page**
>>> | **JIRA ID(s):** | [NERCDL-664](https://jira.ceh.ac.uk/browse/NERCDL-664?jql=key%20in%20(NERCDL-664)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Log into Datalabs as an admin user | User successfully logs in and there is an admin button in the top navigation menu |  |
>>> | 2 | Click on the admin button | User is taken to the resources admin page. There is a "Users" tab on the left side of the page |  |
>>> | 3 | Click on the "Users" tab | User is taken to the user management page |  |
---

>>>###### **TC2.7.4 User management page filters functionality tests PART 1**
>>> | **JIRA ID(s):** | [NERCDL-664](https://jira.ceh.ac.uk/browse/NERCDL-664?jql=key%20in%20(NERCDL-664)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Whilst on the user management page, click on the users field. **Note:** Ensure that the logged in account is a part of multiple projects and is the project admin for at least one project | A drop down of users are displayed. The current logged in user should be displayed here |  |
>>> | 2 | Start to type in a known username | The drop-down list is filtered |  |
>>> | 3 | Select a user by clicking on an item from the drop-down list | User is now displayed in the user field and only items relating to the user are shown on the page |  |
>>> | 4 | Enter a username that is not a user in the Datalabs system | "No options" message is shown in the drop-down |  |
>>> | 5 | Click on the X next to the selected user | User is removed from the field and the page is no longer filtered against the one user |  |
>>> | 6 | View the filter checkboxes | There are various admin, user and owner filters |  |
>>> | 7 | Select some filters e.g. instance admin and project admin | The page is filtered to only show users that meet these filter requirements. Checkboxes are clearly marked as selected |  |
>>> | 8 | Select only the project admin filter | The logged in user should be shown on the page along with any other users who are project admins. The number of projects is shown beneath the user's name on the page. |  |
>>> | 9 | Click on the user's name | A drop-down/page expansion shows all of the projects which the user has project admin status |  |
---

>>>###### **TC2.7.5 User management page filters functionality tests PART 2**
>>> | **JIRA ID(s):** | [NERCDL-789](https://jira.ceh.ac.uk/browse/NERCDL-789?jql=key%20in%20(NERCDL-789)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | On the user management page, ensure that the following users have the following permissions: andrew.longmore@tessella.com - Catalogue admin, rajdeep.uppal@tessella.com - catalogue publisher, alex.lee@tessella.com - catalogue editor, dean.selby@tessella.com - catalogue user | Permissions are set |  |
>>> | 2 | Select the catalogue admin filter | Only users that are catalogue admins are shown e.g. andrew.longmore@tessella.com |  |
>>> | 3 | Select the catalogue publisher filter | Only users that are catalogue admins are shown e.g. rajdeep.uppal@tessella.com |  |
>>> | 4 | Select the catalogue editor editor filter | Only users that are catalogue editors are shown e.g. alex.lee@tessella.com |  |
>>> | 5 | Do not select any filters and expand dean.selby@tessella.com | User has catalogue publisher permissions set  |  |
---

>>>###### **TC2.7.6 Instance Admin tests**
>>> | **JIRA ID(s):** | [NERCDL-787](https://jira.ceh.ac.uk/browse/NERCDL-787?jql=key%20in%20(NERCDL-787)) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | As an instance admin, navigate to https://testlab.test-datalabs.nerc.ac.uk/admin/users | A list of users are shown along with their permissions |  |
>>> | 2 | Select the instance admin filter | All users that are instance admins are shown. The logged in user is also shown |  |
>>> | 3 | Attempt to remove the logged in user's instance admin status | User is unable to remove their own instance admin status |  |
>>> | 4 | Make a non-instance admin an instance admin | User is now an instance admin |  |
>>> | 5 | Log in as this user and attempt to access https://testlab.test-datalabs.nerc.ac.uk/admin/users | User can access this endpoint |  |
---

## 3. Production Deployment Test Script (Functional Testing)
### 3.1 Travis CI, GitLabs & GitHub
>>>###### **TC3.1.1 CI builds pass**
>>> | **JIRA ID(s):** | [JIRA UNIQUE ID(s)](URL to JIRA ISSUE) |OVERALL RESULT: | |
>>> | ------------ | --------- | --------- | ------|
>>> | **Number** | **Step** | **Expected Result** | **Result** |
>>> | 1 | Navigate to https://github.com/NERC-CEH/datalab/actions | The builds have passed |  |
>>> | 2 | Navigate to https://github.com/NERC-CEH/datalab | The build badge at the bottom shows the current GitHub build status ('Push action Passing') |  |
---
## 4. Non-Functional Test Script
### 4.1 Usability Test Cases
### 4.2 Help and Documentation Test Cases
### 4.3 Compatibility Test Cases
### 4.4 Performance Test Cases
### 4.5 Security Test Cases