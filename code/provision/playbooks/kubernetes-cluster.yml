---
- name: Prepare all cluster nodes
  hosts: k8s-cluster
  become: yes
  become_method: sudo

  roles:
    - docker
    - kubernetes-common
    - kubernetes
    - { role: glusterfs, gluster_server: False }
    - app-armor
  environment:
    KUBECONFIG: /etc/kubernetes/admin.conf

- name: Configure Tools
  hosts: k8s-master
  become: yes
  become_method: sudo

  roles:
    - helm
  environment:
    KUBECONFIG: /etc/kubernetes/admin.conf
