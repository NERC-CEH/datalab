{"paragraphs":[{"title":"Introduction","text":"%md\nThis unix shell (`sh`) workbook will extract and convert zipped shape files to csv files for further processing. Start by upload zipped field survey and land cover map shape files using the minio browser and update the variables in the code blocks below. The variables are not scoped for the entire workbook, therefore the two zip files should be run as two independent code blocks. An exit value `143` denotes a time-out for the code block this can resolved by increasing the time-out value in the `sh` interpretor settings.","dateUpdated":"2017-07-31T14:32:18+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>This unix shell (<code>sh</code>) workbook will extract and convert zipped shape files to csv files for further processing. Start by upload zipped field survey and land cover map shape files using the minio browser and update the variables in the code blocks below. The variables are not scoped for the entire workbook, therefore the two zip files should be run as two independent code blocks. An exit value <code>143</code> denotes a time-out for the code block this can resolved by increasing the time-out value in the <code>sh</code> interpretor settings.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1501511538339_553016188","id":"20170731-102603_1445779859","dateCreated":"2017-07-31T14:32:18+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2879"},{"title":"Field Survey","text":"%sh\n# File paths\nshapeFileDirectory=\"/data/survey/shapefile\"\nshapeFileArchive=\"field_survey.tar.gz\"\nshapeFileName=\"FieldSurvey_Shape.shp\"\ncsvDirectory=\"/data/survey/csv\"\ncsvName=\"FieldSurvey.csv\"\n\n# Extract shape files\ntar xf $shapeFileDirectory/$shapeFileArchive -C $shapeFileDirectory\n\n# Create output directory if missing\nif [ ! -d \"$csvDirectory\" ]; then\n    mkdir -p $csvDirectory\nfi\n\n# Convert to CSV\nogr2ogr -explodecollections -f CSV $csvDirectory/$csvName $shapeFileDirectory/$shapeFileName -lco GEOMETRY=AS_WKT","dateUpdated":"2017-07-31T14:32:18+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sh","title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1501511538345_549168699","id":"20170731-113549_2087651186","dateCreated":"2017-07-31T14:32:18+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:2880"},{"title":"Land Cover Map","text":"%sh\n# File paths\nshapeFileDirectory=\"/data/lcm/shapefile\"\nshapeFileArchive=\"LCM2015_GB.tar.gz\"\nshapeFileName=\"LCM2015_GB.gdb\"\ncsvDirectory=\"/data/lcm/csv\"\ncsvName=\"lcm25mWKT\" # extension will be added\n\n# Extract shape files\ntar xf $shapeFileDirectory/$shapeFileArchive -C $shapeFileDirectory\n\n# Create output directory if missing\nif [ ! -d \"$csvDirectory\" ]; then\n    mkdir -p $csvDirectory\nfi\n\n# Convert to CSV\nogr2ogr -explodecollections -f CSV $csvDirectory/intermediate.csv $shapeFileDirectory/$shapeFileName -lco GEOMETRY=AS_WKT\n\n# Switch directory for next step\ncd $csvDirectory\n\n# Split into chunks\nsplit --number=l/20 intermediate.csv $csvName.\n\n# Remove first line header row\nsed -i \"1d\" $csvName.aa\n\n# Clean up\nrm intermediate.csv","user":"anonymous","dateUpdated":"2017-07-31T14:41:11+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sh","title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1501511538346_550322946","id":"20170731-103734_837378686","dateCreated":"2017-07-31T14:32:18+0000","dateStarted":"2017-07-31T14:39:19+0000","dateFinished":"2017-07-31T14:40:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:2881","errorMessage":""},{"text":"%sh\n","dateUpdated":"2017-07-31T14:32:18+0000","config":{"colWidth":12,"editorMode":"ace/mode/sh","results":{},"enabled":true,"editorSetting":{"language":"sh","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1501511538347_549938197","id":"20170731-104207_1237453949","dateCreated":"2017-07-31T14:32:18+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:2882"}],"name":"1 - Convert shape files","id":"2CNGWVKTP","angularObjects":{"2CQJW1M9J:shared_process":[],"2CPHK7FT5:shared_process":[],"2CQYZXH9J:shared_process":[],"2CQHTDT7A:shared_process":[],"2CQ32W8XN:shared_process":[],"2CPCPMGXJ:shared_process":[],"2CNY2P77B:shared_process":[],"2CQG2ACTY:shared_process":[],"2CNPEDR48:shared_process":[],"2CPUUS9HB:shared_process":[],"2CQFY3VNP:shared_process":[],"2CS6UYK63:shared_process":[],"2CRDYDFRX:shared_process":[],"2CRYVUH55:shared_process":[],"2CNMFT174:shared_process":[],"2CQR1YEHJ:shared_process":[],"2CNNAXB23:shared_process":[],"2CRAMRPVB:shared_process":[],"2CSBJSUXX:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}